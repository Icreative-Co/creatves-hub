<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    style-src 'self' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://unpkg.com https://cdn.jsdelivr.net;
    style-src-attr 'unsafe-inline';
    font-src 'self' https://cdn.jsdelivr.net https://fonts.gstatic.com https://cdnjs.cloudflare.com;
    script-src 'self' https://cdnjs.cloudflare.com https://unpkg.com;
    script-src-attr 'unsafe-inline';
    img-src 'self' data:;
    connect-src 'self';
  ">
  <title>Manage Movies</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
  <link rel="stylesheet" href="/assets/css/manage-movies.css">
  <script src="/assets/js/purify.min.js"></script>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <img src="/assets/images/logo2.svg" alt="Creatves Logo" class="logo">
    <div class="hamburger">
      <span class="line"></span>
      <span class="line"></span>
      <span class="line"></span>
    </div>
    <ul class="nav-list">
      <button class="close">&times;</button>
      <li><a href="/">Home</a></li>
      <li><a href="/manage-movies.html" aria-current="page">Manage Movies</a></li>
      <li><a href="/about">About</a></li>
      <!-- <li><a href="/contact" class="btn"> </a>>Contact</a></li> -->
      <li><a href="/contact">Contact</a></li>
    </ul>
    <!-- Logout button appended here by manage-movies.js -->
  </nav>

  <!-- Main Content -->
  <div class="manage-movies">
    <div class="header">
      <small>Admin Panel</small>
      <h4 id="form-title">Add New Movie</h4>
    </div>
    <div class="form-container">
      <form id="movie-form" class="form-grid">
        <div class="form-group">
          <label for="title">Title</label>
          <input type="text" id="title" name="title" required>
          <span id="title-error" class="error-message hidden"></span>
        </div>
        <div class="form-group">
          <label for="movie_file">Movie File</label>
          <input type="file" id="movie_file" name="movie_file" accept="video/*,audio/*" required>
          <span id="movie_file-error" class="error-message hidden"></span>
        </div>
        <div class="form-group">
          <label for="poster_file">Poster File</label>
          <input type="file" id="poster_file" name="poster_file" accept="image/*">
          <span id="poster_file-error" class="error-message hidden"></span>
        </div>
        <div class="form-group">
          <label for="duration">Duration</label>
          <input type="text" id="duration" name="duration">
          <span id="duration-error" class="error-message hidden"></span>
        </div>
        <div class="form-group">
          <label for="year">Year</label>
          <input type="text" id="year" name="year">
          <span id="year-error" class="error-message hidden"></span>
        </div>
        <div class="form-group">
          <label for="rating">Rating (0-10)</label>
          <input type="number" id="rating" name="rating" min="0" max="10" step="0.1">
          <span id="rating-error" class="error-message hidden"></span>
        </div>
        <div class="form-group">
          <label for="resolution">Resolution</label>
          <input type="text" id="resolution" name="resolution">
          <span id="resolution-error" class="error-message hidden"></span>
        </div>
        <div class="form-group">
          <label for="category">Category</label>
          <select id="category" name="category">
            <option value="">Select Category</option>
            <option value="movie">Movie</option>
            <option value="tv-series">TV Series</option>
            <option value="music">Music</option>
          </select>
          <span id="category-error" class="error-message hidden"></span>
        </div>
        <div class="form-group">
          <label for="genres">Genres (comma-separated)</label>
          <input type="text" id="genres" name="genres">
          <span id="genres-error" class="error-message hidden"></span>
        </div>
        <div class="form-group description-group">
          <label for="description">Description</label>
          <textarea id="description" name="description"></textarea>
          <span id="description-error" class="error-message hidden"></span>
        </div>
        <div class="form-group">
          <span id="general-error" class="error-message hidden"></span>
        </div>
        <div class="form-buttons">
          <button type="submit" class="save-btn" disabled>Save</button>
          <button type="button" class="cancel-btn">Cancel</button>
        </div>
      </form>
    </div>

    <h4>Movies</h4>
    <table class="movie-table">
      <thead>
        <tr>
          <th data-sort="id">ID <i class="sort-icon fa-solid fa-sort"></i></th>
          <th data-sort="title">Title <i class="sort-icon fa-solid fa-sort"></i></th>
          <th>Poster</th>
          <th data-sort="year">Year <i class="sort-icon fa-solid fa-sort"></i></th>
          <th data-sort="duration">Duration <i class="sort-icon fa-solid fa-sort"></i></th>
          <th data-sort="rating">Rating <i class="sort-icon fa-solid fa-sort"></i></th>
          <th data-sort="resolution">Resolution <i class="sort-icon fa-solid fa-sort"></i></th>
          <th data-sort="category">Category <i class="sort-icon fa-solid fa-sort"></i></th>
          <th data-sort="genres">Genres <i class="sort-icon fa-solid fa-sort"></i></th>
          <th data-sort="description">Description <i class="sort-icon fa-solid fa-sort"></i></th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="movie-table-body"></tbody>
    </table>
  </div>

  <div id="loading" class="hidden">Loading...</div>
  <div id="progress-bar-container" class="hidden">
    <progress id="upload-progress" value="0" max="100"></progress>
    <span id="progress-text">0%</span>
  </div>

  <script src="/assets/js/manage-movies.js"></script>
</body>
</html>
